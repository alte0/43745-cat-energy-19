{"version":3,"file":"script.js","sources":["script.js"],"sourcesContent":["require('../../node_modules/svg4everybody/dist/svg4everybody.js');\nrequire('../../node_modules/picturefill/dist/picturefill.js');\n\nfunction ready() {\n  var header = document.querySelector(\".header\");\n  var toggle = document.querySelector(\".header__toggle-menu\");\n  var catalogLists = document.querySelector(\".catalog__list\");\n  var additionalList = document.querySelector(\".additional-items__list\");\n  var graphic = document.querySelector(\".graphic-example\");\n  var wrapGraphicBtn = document.querySelector(\".graphic-example__wrap\");\n  var imgAfter = document.querySelector(\".graphic-example__after-photo-cat\");\n  var imgBefore = document.querySelector(\".graphic-example__before-photo-cat\");\n  var slider = document.querySelector(\".graphic-example__slider\");\n  var sideBtnMobile = \"left\";\n  var widthWindow = null || getWindowInnerWidth();\n  var TABLET = 768;\n  var store = {\n    init: true,\n    clicked: 0,\n    slider: null,\n    photoBefore: null,\n    photoAfter: null,\n    w: null,\n    bar: null\n  }\n\n  function getWindowInnerWidth() {\n    return window.innerWidth;\n  }\n\n  function handerClickToggle() {\n    header.classList.toggle(\"header_open\");\n  }\n\n  function handerClickOrder(evt) {\n    var target = evt.target;\n    if (target.tagName === \"A\") {\n      evt.preventDefault();\n    }\n  }\n\n  function handerClickbtns(evt) {\n    var target = evt.target;\n    var dataSide = target.dataset.side;\n    if (target.tagName === \"BUTTON\") {\n      if ((sideBtnMobile !== dataSide) && (widthWindow < TABLET)) {\n        sideBtnMobile = dataSide;\n        sideBtnTablet = null;\n        graphic.classList.toggle(\"graphic-example_after\");\n      } else {\n        sideBtnMobile = \"left\";\n        slider.removeAttribute(\"style\");\n        imgAfter.removeAttribute(\"style\");\n        imgBefore.removeAttribute(\"style\");\n\n        switch (dataSide) {\n          case \"left\":\n            graphic.classList.remove(\"graphic-example_after\");\n            graphic.classList.add(\"graphic-example_before\");\n            sideBtn = dataSide;\n            break;\n          case \"right\":\n            graphic.classList.remove(\"graphic-example_before\");\n            graphic.classList.add(\"graphic-example_after\");\n            sideBtn = dataSide;\n            break;\n          default:\n            break;\n        }\n      }\n    }\n  }\n\n  function removeClassGraphic() {\n    graphic.classList.remove(\"graphic-example_after\");\n    graphic.classList.remove(\"graphic-example_before\");\n  }\n\n  function slideReady(e) {\n    e.preventDefault();\n    store.clicked = 1;\n    removeClassGraphic();\n    window.addEventListener(\"mousemove\", slideMove);\n    window.addEventListener(\"touchmove\", slideMove);\n  }\n\n  function slideFinish() {\n    store.clicked = 0;\n  }\n\n  function slideMove(e) {\n    var pos;\n    if (store.clicked == 0) return false;\n    pos = getCursorPos(e)\n\n    if (pos < 0) pos = 0;\n    if (pos > store.w) pos = store.w;\n    slide(pos);\n  }\n\n  function getCursorPos(e) {\n    var a, x = 0;\n    e = e || window.event;\n    a = store.bar.getBoundingClientRect();\n    x = e.pageX - a.left;\n    x = x - window.pageXOffset;\n    return x;\n  }\n\n  function slide(x) {\n    var percent = (x / store.w * 100);\n    store.slider.style.left = percent + \"%\";\n    store.photoBefore.style.clip = \"rect(0, \" + (685 - (685 / 100 * percent) - correctPhotoBefore(widthWindow)) + \"px, 685px, 0)\";\n    store.photoAfter.style.clip = \"rect(0, 710px, 518px, \" + (710 - (710 / 100 * percent) - correctPhotoAfter(widthWindow)) + \"px)\";\n\n  }\n\n  function correctPhotoBefore(widthWindow) {\n    if (widthWindow >= 1300) {\n      return -24;\n    }\n    return 5;\n  }\n\n  function correctPhotoAfter(widthWindow) {\n    if (widthWindow >= 1300) {\n      return -21;\n    }\n    return 6;\n  }\n\n  function initApp(store) {\n    var mobile = widthWindow < 768;\n    var tablet = widthWindow >= 768;\n    removeClassGraphic();\n\n    function setInit() {\n      store.init = !store.init;\n    }\n\n    function initTablet() {\n      setInit();\n      store.bar = document.querySelector(\".graphic-example__bar\");\n      store.w = store.bar.offsetWidth;\n      var percent = (store.w / 2 / store.w * 100);\n      store.photoAfter = imgAfter;\n      store.photoBefore = imgBefore;\n      store.photoBefore.style.clip = \"rect(0, \" + Math.floor(685 / 2 - correctPhotoBefore(widthWindow)) + \"px, 685px, 0)\";\n      store.photoAfter.style.clip = \"rect(0, 710px, 518px, \" + Math.floor(710 / 2 - correctPhotoAfter(widthWindow)) + \"px)\";\n      store.slider = slider;\n      store.slider.style.left = percent + \"%\";\n      store.slider.addEventListener(\"mousedown\", slideReady);\n      window.addEventListener(\"mouseup\", slideFinish);\n      store.slider.addEventListener(\"touchstart\", slideReady);\n      window.addEventListener(\"touchstop\", slideFinish);\n    }\n\n    function destroyMobile() {\n      setInit();\n      store.slider.removeAttribute(\"style\");\n      store.photoBefore.removeAttribute(\"style\");\n      store.photoAfter.removeAttribute(\"style\");\n\n      store.slider.removeEventListener(\"mousedown\", slideReady);\n      store.slider.removeEventListener(\"touchstart\", slideReady);\n      window.removeEventListener(\"mouseup\", slideFinish);\n      window.removeEventListener(\"touchstop\", slideFinish);\n    }\n\n    if (tablet && store.init) {\n      initTablet();\n    }\n\n    if (mobile && !store.init) {\n      destroyMobile();\n    }\n  };\n\n  if (header) {\n    header.classList.remove(\"header_open\");\n  }\n\n  if (toggle) {\n    toggle.addEventListener(\"click\", handerClickToggle);\n  }\n\n  if (catalogLists) {\n    catalogLists.addEventListener(\"click\", handerClickOrder);\n  }\n\n  if (additionalList) {\n    additionalList.addEventListener(\"click\", handerClickOrder);\n  }\n\n  if (wrapGraphicBtn) {\n    wrapGraphicBtn.addEventListener(\"click\", handerClickbtns);\n  }\n\n  if (graphic) {\n    initApp(store);\n  }\n\n  svg4everybody();\n\n  window.onresize = function () {\n    widthWindow = getWindowInnerWidth();\n\n    if (graphic) {\n      initApp(store);\n    }\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", ready);\n"],"names":["ready","header","document","querySelector","toggle","catalogLists","additionalList","graphic","wrapGraphicBtn","imgAfter","imgBefore","slider","sideBtnMobile","widthWindow","getWindowInnerWidth","store","init","clicked","photoBefore","photoAfter","w","bar","window","innerWidth","handerClickOrder","evt","target","tagName","preventDefault","removeClassGraphic","classList","remove","slideReady","e","addEventListener","slideMove","slideFinish","pos","a","x","percent","event","getBoundingClientRect","pageX","left","pageXOffset","style","clip","correctPhotoBefore","correctPhotoAfter","initApp","mobile","tablet","setInit","offsetWidth","Math","floor","initTablet","removeAttribute","removeEventListener","dataSide","dataset","side","sideBtnTablet","add","sideBtn","svg4everybody","onresize","require"],"mappings":"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"}